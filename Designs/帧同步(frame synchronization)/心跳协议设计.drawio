<mxfile host="Electron" modified="2024-02-26T05:46:10.533Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/23.1.5 Chrome/120.0.6099.109 Electron/28.1.0 Safari/537.36" etag="C-SeGgoyLpfUxK6B5Ay9" version="23.1.5" type="device">
  <diagram id="auk86ji9Mhsj2gY7a7Xz" name="第 1 页">
    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="p5r-RvevwSaTGHLUto1T-1" value="心跳设计(Heartbeat)" style="swimlane;html=1;childLayout=stackLayout;startSize=20;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="40" y="20" width="600" height="990" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-2" value="Client" style="swimlane;html=1;startSize=20;" vertex="1" parent="p5r-RvevwSaTGHLUto1T-1">
          <mxGeometry y="20" width="300" height="970" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-65" value="" style="ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;" vertex="1" parent="p5r-RvevwSaTGHLUto1T-2">
          <mxGeometry x="165" y="40" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-66" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="p5r-RvevwSaTGHLUto1T-65" parent="p5r-RvevwSaTGHLUto1T-2" target="p5r-RvevwSaTGHLUto1T-67">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="180" y="150" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-67" value="请求连接服务器" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="p5r-RvevwSaTGHLUto1T-2">
          <mxGeometry x="120" y="90" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-76" value="N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="p5r-RvevwSaTGHLUto1T-2" source="p5r-RvevwSaTGHLUto1T-73" target="p5r-RvevwSaTGHLUto1T-75">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-79" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="p5r-RvevwSaTGHLUto1T-2" source="p5r-RvevwSaTGHLUto1T-73" target="p5r-RvevwSaTGHLUto1T-78">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-73" value="是否连接中" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="p5r-RvevwSaTGHLUto1T-2">
          <mxGeometry x="140" y="310" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-77" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="p5r-RvevwSaTGHLUto1T-2" source="p5r-RvevwSaTGHLUto1T-75" target="p5r-RvevwSaTGHLUto1T-67">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-75" value="重试连接" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="p5r-RvevwSaTGHLUto1T-2">
          <mxGeometry x="120" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-81" value="N:等待下次迭代" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="p5r-RvevwSaTGHLUto1T-2" source="p5r-RvevwSaTGHLUto1T-78" target="p5r-RvevwSaTGHLUto1T-73">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-83" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="p5r-RvevwSaTGHLUto1T-2" source="p5r-RvevwSaTGHLUto1T-78" target="p5r-RvevwSaTGHLUto1T-84">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="180" y="550" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-78" value="是否距离最后一次发送Ping超过5s" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="p5r-RvevwSaTGHLUto1T-2">
          <mxGeometry x="140" y="430" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-85" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="p5r-RvevwSaTGHLUto1T-2" source="p5r-RvevwSaTGHLUto1T-84" target="p5r-RvevwSaTGHLUto1T-75">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="40" y="600" />
              <mxPoint x="40" y="230" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-87" value="N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="p5r-RvevwSaTGHLUto1T-2" source="p5r-RvevwSaTGHLUto1T-84" target="p5r-RvevwSaTGHLUto1T-86">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-84" value="是否有未收到Pong的标记" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="p5r-RvevwSaTGHLUto1T-2">
          <mxGeometry x="140" y="560" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-86" value="发送Ping并标记未收到Pong" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="p5r-RvevwSaTGHLUto1T-2">
          <mxGeometry x="120" y="690" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-103" value="移除未收到Pong的标记，并统计延迟" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="p5r-RvevwSaTGHLUto1T-2">
          <mxGeometry x="120" y="790" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-11" value="Server" style="swimlane;html=1;startSize=20;" vertex="1" parent="p5r-RvevwSaTGHLUto1T-1">
          <mxGeometry x="300" y="20" width="300" height="970" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-70" value="收到连接请求，响应" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="p5r-RvevwSaTGHLUto1T-11">
          <mxGeometry x="50" y="90" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-105" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="p5r-RvevwSaTGHLUto1T-11" source="p5r-RvevwSaTGHLUto1T-90" target="p5r-RvevwSaTGHLUto1T-104">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-90" value="记录收到Ping的时间" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="p5r-RvevwSaTGHLUto1T-11">
          <mxGeometry x="50" y="690" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-92" value="定时清理旧连接" style="swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="p5r-RvevwSaTGHLUto1T-11">
          <mxGeometry x="20" y="375" width="260" height="245" as="geometry">
            <mxRectangle x="50" y="375" width="120" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-97" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="p5r-RvevwSaTGHLUto1T-92" source="p5r-RvevwSaTGHLUto1T-93" target="p5r-RvevwSaTGHLUto1T-96">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-100" value="N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="p5r-RvevwSaTGHLUto1T-92" source="p5r-RvevwSaTGHLUto1T-93" target="p5r-RvevwSaTGHLUto1T-99">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-93" value="最后收到Ping是否超过30s" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="p5r-RvevwSaTGHLUto1T-92">
          <mxGeometry x="54" y="35" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-102" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="p5r-RvevwSaTGHLUto1T-92" source="p5r-RvevwSaTGHLUto1T-96" target="p5r-RvevwSaTGHLUto1T-99">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-96" value="清理链接" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="p5r-RvevwSaTGHLUto1T-92">
          <mxGeometry x="170" y="35" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-101" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="p5r-RvevwSaTGHLUto1T-92" source="p5r-RvevwSaTGHLUto1T-99" target="p5r-RvevwSaTGHLUto1T-93">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="20" y="195" />
              <mxPoint x="20" y="75" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-99" value="等待下次迭代" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="p5r-RvevwSaTGHLUto1T-92">
          <mxGeometry x="54" y="155" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-104" value="回复Pong" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="p5r-RvevwSaTGHLUto1T-11">
          <mxGeometry x="50" y="790" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-71" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="p5r-RvevwSaTGHLUto1T-1" source="p5r-RvevwSaTGHLUto1T-67" target="p5r-RvevwSaTGHLUto1T-70">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-74" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="p5r-RvevwSaTGHLUto1T-1" source="p5r-RvevwSaTGHLUto1T-70" target="p5r-RvevwSaTGHLUto1T-73">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-91" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="p5r-RvevwSaTGHLUto1T-1" source="p5r-RvevwSaTGHLUto1T-86" target="p5r-RvevwSaTGHLUto1T-90">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="p5r-RvevwSaTGHLUto1T-106" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="p5r-RvevwSaTGHLUto1T-1" source="p5r-RvevwSaTGHLUto1T-104" target="p5r-RvevwSaTGHLUto1T-103">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
